flowchart LR

%% =========================
%% Adaptive Decision Engine V2
%% =========================

subgraph CLIENT[Client - Mobile App]
  UI_LOG[Logging UI]
  UI_VIEW[Views: Timeline / Patterns / Recommendations]
  UI_FB[Feedback Capture]
end

subgraph SERVER[Server - API / Functions]
  INF[Inference and Labeling]
  PAT[Pattern Engine]
  REC[Recommendation Engine]
  LEARN[Feedback and Learning]
end

subgraph DATA[Data Store]
  DB[(Users + Events + Runs + Outputs)]
end

%% Writes
UI_LOG --> DB
UI_FB --> DB

%% Reads
DB --> UI_VIEW

%% Inference + Intelligence
UI_LOG --> INF
INF --> DB

DB --> PAT
PAT --> DB

DB --> REC
REC --> DB

%% Feedback loop
UI_FB --> LEARN
LEARN --> DB
LEARN --> REC
